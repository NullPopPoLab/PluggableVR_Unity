<html lang="ja-JP">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>PluggableVR for Koikatu</title>
</head>
<body>

<h1>PluggableVR for Koikatu</h1>

コイカツ ゲーム本体とCharaStudioをVRで動作させるためのプラグインです。<br>
<a target="_blank" href="https://www.patreon.com/posts/hf-patch-for-kk-46339224">HF Patch 3.13</a>導入済の環境で動作確認しています。<br>
HF Patchが古いとBepInExのバージョンチェックで弾かれるようですが、多少古い程度ならソースから自前ビルドすればいけるはず。<br>

<h2>内容</h2>

<dl>
<dt>BepInEx</dt>
<dt>CharaStudio_Data</dt>
<dt>Koikatu_Data</dt>
<dd>ゲームフォルダに追加するファイル群</dd>
<dt>CharaStudio_novr.bat</dt>
<dt>Koikatu_novr.bat</dt>
<dd>通常版起動バッチファイル</dd>
<dt>CharaStudio_vr.bat</dt>
<dt>Koikatu_vr.bat</dt>
<dd>VR版起動バッチファイル</dd>
<dt>PluggableVR_KK_HowToUse.html</dt>
<dd>使い方説明</dd>
</dl>

<h2>対応VR環境</h2>

現状、OculusVR専用です。<br>
(OpenVRでの対応に失敗した経緯ありまして)<br>

<h2>導入手順</h2>

<ol>
<li>付属の BepInEx CharaStudio_Data CharaStudio_novr.bat CharaStudio_vr.bat をゲームフォルダに上書きします。<br>
新規導入の場合は追加だけのはずですが、上書きの際は他所のプラグインと機能かぶってるかもしれないので要注意ということで。<br>
</li>

<li>CharaStudio_Data,Koikatu_Data/globalgamemanagers のVR版を作成します
<ol>
<li>起動時にも自動対応されますが、一応ここで globalgamemanagers のコピーを globalgamemanagers_novr にバックアップしておくと比較的安全です。</li>
<li><a target="_blank" href="https://github.com/Ooetksh/KoikatuVR">ここ参考</a>(手抜き)に、 globalgamemanagers を書き換えます。ただし、
<ul>
<li>globalgamemanagers 自体は書き換えないで、 globalgamemanagers_vr に生成します。</li>
<li>修正後の方に違いあります
<div style="border:groove">
&nbsp;0 vector enabledVRDevices<br>
&nbsp;&nbsp;0 Array Array (1 items)<br>
&nbsp;&nbsp;&nbsp;0 int size = 1<br>
&nbsp;&nbsp;&nbsp;[0]<br>
&nbsp;&nbsp;&nbsp;&nbsp;1 string data = "Oculus"<br>
</div></li>
</ul></li>
</ol></li>
</ol>

<h2>起動方法</h2>

<ul>
<li>CharaStudio_vr.bat Koikatu_vr.bat で起動するとVR onで動作</li>
<li>CharaStudio_novr.bat Koikatu_novr.bat で起動するとVR offで動作</li>
<li>通常通り CharaStudio.exe Koikatu.exe で起動すると前回の選択で</li>
</ul>

<h2>操作方法</h2>

<ul>
<li>VRヘッドセット</li>
<ul>
<li>カメラをルームスケールで移動させます</li>
</ul>
<li>主スティック (右利き設定では左スティック)でカメラ位置マークを前後左右または上下左右に移動させます<br>(主スティックを押し込むことで移動方法を切り替えます)</li>
<li>副スティック (右利き設定では右スティック)左右でカメラ位置マークを左右に回転させます</li>
<li>副スティック上下でカメラ位置マークから前後に移動させます</li>
<li>両方のスティックから指を離すことで、カメラを位置マーク地点に移します</li>
<li>あと、当面の調査用として、Yボタン押しながらBボタン押すと現在のHierarchy状態ごっそりファイルに書き出します。(将来的に廃止予定)</li>
<li>バージョン0.0.3からはキーボードの Alt+P でもHierarchy状態書き出し機能が使えます。<br>
こちらはプラグインが HierarchyDumper.dll に独立しており、VRとは無関係に動作します。(公式VR版でも共通で使えます)</li>
</ul>

UI操作は通常通りPC画面のマウス操作で。<br>
ただしRaycastまともに動作しないので、3D的な操作は無理。<br>

<h2>既知の問題点とか今後の予定とか</h2>

<a target="_blank" href="https://github.com/users/NullPopPoLab/projects/1">GitHubの看板</a> 参照。<br>

<h2>ソースコード入手</h2>

<a target="_blank" href="https://github.com/NullPopPoLab/PluggableVR_Unity/tree/Plugin_KK">GitHubのリポジトリ</a> 参照。<br>

<h2>更新履歴</h2>

<h3>0.0.5</h3>
<ul>
<li>KK版,CS版統合</li>
<li>基本的な遷移は一通り繋いだ(はず)</li>
<li>会話シーン内のカメラ切り替えに対応</li>
<li>手の位置に当たり判定入れてみた(けど反応してくんない)</li>
<li>HierarchyDumperのファイル出力で先頭にBOM入れとく</li>
</ul>

<h3>0.0.4</h3>
<ul>
<li>VRカメラの軸ズレ問題解決</li>
<li>右スティック上下での前後移動に対応</li>
<li>元のカメラに連動する諸機能への対応</li>
</ul>

<h3>0.0.3</h3>
<ul>
<li>シーンロード後のカメラ初期位置反映</li>
<li>本来非表示になってるはずの余計な表示を除去</li>
<li>スティック回転中心を足元想定位置に固定</li>
<li>HierarchyDumper機能独立</li>
</ul>

<h3>0.0.2</h3>
<ul>
<li>プレイヤー操作によるカメラ移動に対応</li>
</ul>

<h3>0.0.1</h3>
<ul>
<li>とりあえず3DシーンをVRで観られるようにしただけ</li>
</ul>

<hr>
NullPopPo Lab.<br>
<a target="_blank" href="https://github.com/NullPopPoLab">GitHub</a><br>
<a target="_blank" href="https://twitter.com/NullPopPoLab">Twitter</a><br>
<a target="_blank" href="https://www.pixiv.net/users/42819339">Pixiv</a><br>

</body>
</html>
