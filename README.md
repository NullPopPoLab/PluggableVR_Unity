# PluggableVR

既存のUnity3DアプリケーションをMOD経由でVR対応にするための支援機能群(になる予定)
単にビューだけVR化するものではなく、VRに適した操作体系の実現を目指しています。
(NullPopPoは重度の酔ぃ酔ぃをぇをぇ人間なので、強引にカメラ動かすやつ10秒ともたない)


## 想定環境 

Unity+Oculus Integrationで動作する3D空間。
プラグイン想定なので、アプリケーション本体のバージョンと合わせなければならない点に留意。
ひとまず、当方で対応を目指すターゲットアプリケーションのうち最も古いUnity5.6.2f1で動作確認。
(Unity5.6系ならたぶんこのままいけるけど、これ以前については今では公式配布されてない
Oculus Integrationの古いバージョンを入手しなければならない特殊任務があります)


## ブランチ説明

- main: 通常の機能実装用
- Plugin_CS: (コイカツ版)CharaStudio用プラグイン (Unity 5.6.2f1)
- Plugin_CS2: (コイカツサンシャイン版)CharaStudio用プラグイン (Unity 2019.4.9f1)
- Plugin_EC: エモーションクリエイターズ用プラグイン (Unity 2017.4.24f1)
- Plugin_HS2: ハニーセレクト2用プラグイン (Unity 2018.2.21f1)
- Plugin_KK: コイカツ用プラグイン (Unity 5.6.2f1)
- Plugin_KKS: コイカツサンシャイン用プラグイン (Unity 2019.4.9f1)
- Plugin_SN2: StudioNEOV2用プラグイン (Unity 2018.4.11f1)


## 能書きはさておき、ひとまず動作デモ

TestWorld シーンで操作体系こんな感じデモが動作します。

通常はカメラをアバターの目に合わせた状態から主観操作します。
ただし、双方が必ずしも連動しているわけではなく、
カメラ側がプレイヤーのトラッキングに完全連動するのに対し、
アバター側はアプリケーション仕様として辻褄合わなくなるケースで
カメラの動きとは無関係に補正されます。
(ここでカメラ側を理不尽に動かすと酔ぃ酔ぃをぇをぇ発動な事態)

どちらかのスティックに指を載せるとアバターの俯瞰操作に移行します。
(このときもカメラは主観操作を維持し続けます)
主スティックでカメラ向きに対し前後左右に動かし、
副スティックでアバターの向きを回転させます。
(回転の中心が怪しいのは足元の位置決めが未実装なためです 詳細は解説にて)

主スティックを押し込むと、前後移動と上下移動を切り替えることができます。
切り替えた後でも、一旦主観操作に戻した時点で前後移動に戻ります。

スティックから指を離すと、カメラがアバターの目に移って主観操作に戻ります。
一般の3Dゲームではこのとき壁に埋まったりするのを防ぐために補正するところですが、
VRゲームではそれやると動くとき困るので禁忌です。

(GUI操作については、また後ほど)


## 解説とか

(未稿)


## 看板

https://github.com/users/NullPopPoLab/projects/1
